package cda.ftp.ihm.components;

import javafx.beans.binding.Bindings;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Node;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;

public class FTPloginView extends VBox {
	
	private TextField hostField;
	private TextField portField;
	private TextField userField;
	private PasswordField passField;
	private Button loginButton;
	private Label incorectConnectLabel;
	private Label incorectPassLabel;
	
	
	public FTPloginView() {
		super();
		generateView();
		loginAction();
	}
	
	private void loginAction() {
		loginButton.setOnMouseClicked(e -> {
			if(hostField.getText().equals("")) {
				incorectConnectLabel.setText("Host empty");
			} else if(portField.getText().equals("")) {
				incorectConnectLabel.setText("Port empty");
			}
			
			if(userField.getText().equals("")) {
				incorectConnectLabel.setText("User empty");
			} else if(passField.getText().equals("")) {
				incorectConnectLabel.setText("Pass empty");
			}
			
			System.out.println(hostField.getText() + ":" + portField.getText());
			System.out.println(userField.getText() + " " + passField.getText());
		});
    }
	
	private void generateView() {
		VBox titleBox = new VBox();
		
		VBox credentialBox = new VBox();
		
		HBox connectBox = new HBox();
		VBox hostBox = new VBox();
		VBox portBox = new VBox();
		
		VBox userBox = new VBox();
		VBox passBox = new VBox();
		VBox buttonBox = new VBox();
		
		Label titleLabel = new Label("FTP");
		Label hostLabel = new Label("Host");
		Label portLabel = new Label("Port");
		Label userLabel = new Label("Login");
		Label passLabel = new Label("Password");
		incorectConnectLabel = new Label("Error connection refused");
		incorectPassLabel = new Label("Unknow user / password");
		
		hostField = new TextField();
		portField = new TextField();
		userField = new TextField();
		passField = new PasswordField();
		
		loginButton = new Button("Log In");
		
		this.getChildren().addAll(titleBox, credentialBox);
		credentialBox.getChildren().addAll(connectBox, userBox, passBox, buttonBox);
		connectBox.getChildren().addAll(hostBox, portBox);
		titleBox.getChildren().addAll(titleLabel);
		hostBox.getChildren().addAll(hostLabel, hostField, incorectConnectLabel);
		portBox.getChildren().addAll(portLabel, portField);
		userBox.getChildren().addAll(userLabel, userField);
		passBox.getChildren().addAll(passLabel, passField, incorectPassLabel);
		buttonBox.getChildren().addAll(loginButton);
		
		this.setPadding(new Insets(16));
		this.setSpacing(16);
		
		titleLabel.setFont(Font.font(null, FontWeight.EXTRA_BOLD, 64));
		hostField.setPromptText("Ex: 127.0.0.1");
		portField.setPromptText("Ex: 2121");
		incorectPassLabel.setTextFill(Color.rgb(210, 39, 30));
		incorectConnectLabel.setTextFill(Color.rgb(210, 39, 30));
		
		
		credentialBox.setPadding(new Insets(16));
		credentialBox.setSpacing(16);
		connectBox.setSpacing(16);

		HBox.setHgrow(hostBox, Priority.ALWAYS);
		
		hostField.setMinWidth(170);
		portField.setMinWidth(80);
		portField.setPrefWidth(80);
		
		titleBox.setAlignment(Pos.CENTER);
		buttonBox.setAlignment(Pos.CENTER);
		VBox.setVgrow(buttonBox, Priority.ALWAYS);
		VBox.setVgrow(credentialBox, Priority.ALWAYS);
	}
}
