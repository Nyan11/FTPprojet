package cda.projet.client.logic;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.PrintStream;
import java.net.Socket;

public class Communicator {
	
	static Socket socket;
	static BufferedReader br;
	static PrintStream ps;
	
	public Communicator(Socket socket, BufferedReader br, PrintStream ps) {
		this.socket = socket;
		this.br = br;
		this.ps = ps;
	}
	
	public void sendMessage(String message) throws IOException {
		if(message.equals("bye")) {
			ps.println(message);
		} else if(message.startsWith("user ")) {
			ps.println(message);
			recvMessage();
		} else if(message.startsWith("pass ")) {
			ps.println(message);
			recvMessage();
		} else if(message.equals("ls")) {
			ps.println(message);
			recvMessage();
		} else if(message.equals("pwd")) {
			ps.println(message);
			recvMessage();
		} else if(message.startsWith("cd ")) {
			ps.println(message);
			recvMessage();
		} else if(message.startsWith("get ")) {
			ps.println(message);
			download();
		} else if(message.startsWith("stor ")) {
			ps.println(message);
			upload();
		} else {
			
		}
	}
	
	public String recvMessage() throws IOException {
		String value = "";
		do {
			value = br.readLine();
			System.out.println(">> " + value);
		} while(value.charAt(0) == '1');
		return value;
	}
	
	public void upload() {
		
	}
	
	public void download() {
		
	}
}
