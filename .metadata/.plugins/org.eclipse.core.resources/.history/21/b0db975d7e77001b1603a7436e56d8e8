package cda.projet.serveur;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import cda.projet.serveur.commande.CommandExecutor;

public class LauncherServer {

	protected int 			serverPort   = 2121;
	protected ServerSocket 	serverSocket = null;
	
	public LauncherServer(int port) {
		this.serverPort = port;
	}

	
	public void start() {
		try {
			serverSocket = new ServerSocket(serverPort);
		} catch (IOException e) {
			e.printStackTrace();
		}

		try {
			Socket clientSocket = null;
			CommandExecutor commande = null;
			WorkerClient worker = null;
			while(true) {
				clientSocket = this.serverSocket.accept();
				commande = new CommandExecutor();
				worker = new WorkerClient(clientSocket, commande);
				new Thread(worker).start();
			}	
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
